//控制气泡图的切换，0是情感，1是意象，默认0
let bubbleMode=0;
let bubbleChart = echarts.init(document.querySelector('.bubbleBox'));
let bubbleOptions
//气泡的颜色
let color = [
    new echarts.graphic.RadialGradient(0.5, 0.5, 0.5, [{
        offset: 0, //YELLOW
        color: 'rgba(254,220,91, 1)'
    }, {
        offset: 1,
        color: 'rgba(250,192,61,1)'
    }]),
    new echarts.graphic.RadialGradient(0.5, 0.5, 0.5, [{
        offset: 0,
        color: 'rgba(216,222,138, 1)'
    }, {
        offset: 1,
        color: 'rgba(205,209,113,1)'
    }]),
    new echarts.graphic.RadialGradient(0.5, 0.5, 0.5, [{
        offset: 0, //PINK
        color: 'rgba(236, 176, 193, 1)',
    },
        {
            offset: 1,
            color: 'rgba(221,107,123, 1)',
        },
    ]),
    new echarts.graphic.RadialGradient(0.5, 0.5, 0.5, [{
        offset: 0, //RED
        color: 'rgba(243, 166, 148, 1)',
    },
        {
            offset: 1,
            color: 'rgba(238, 121, 89, 1)',
        },
    ]),
    new echarts.graphic.RadialGradient(0.5, 0.5, 0.5, [{
        offset: 0, //GREEN
        color: 'rgba(192, 214, 149, 1)',
    },
        {
            offset: 1,
            color: 'rgba(169, 190, 123, 1)',
        },
    ]),
    new echarts.graphic.RadialGradient(0.5, 0.5, 0.5, [{
        offset: 0, //BLUE
        color: 'rgba(174,208,238,1)',
    },
        {
            offset: 1,
            color: 'rgba(110,155,197,1)',
        },
    ]),
    new echarts.graphic.RadialGradient(0.5, 0.5, 0.5, [{
        offset: 0,
        color: 'rgba(210,175,157,1)',
    },
        {
            offset: 1,
            color: 'rgba(188,131,107,1)',
        },
    ]),
    new echarts.graphic.RadialGradient(0.5, 0.5, 0.5, [{
        offset: 0, //purple
        color: 'rgba(211,201,214, 1)',
    },
        {
            offset: 1,
            color: 'rgba(166,126,183, 1)',
        },
    ]),
];

function updateBubbles(){
    if(showMode==0){//全局
        if(bubbleMode == 0){
            axios('http://localhost:8080/visualization/poem/emo')
                .then(function (response){
                    // if(response.data!="")
                    updateBubbles2(response);
                }).catch(function (err) {
                console.log(err)
            });
        }
        else if(bubbleMode == 1){
            axios('http://localhost:8080/visualization/poem/images')
                .then(function (response){
                    // if(response.data!="")
                    updateBubbles2(response);
                }).catch(function (err) {
                // console.log(err)
            });
        }
    }
    else if(showMode==1)//未指定诗人，指定时间。
    {
        if(bubbleMode == 0){
            axios('http://localhost:8080/visualization/poem/emo/?beginTime='+beginTime+"&endTime="+endTime)
                .then(function (response){
                    // if(response.data!="")
                    updateBubbles2(response);
                }).catch(function (err) {
                console.log(err)
            });
        }
        else if(bubbleMode == 1){
            axios('http://localhost:8080/visualization/poem/images/?beginTime='+beginTime+"&endTime="+endTime)
                .then(function (response){
                    // if(response.data!="")
                    updateBubbles2(response);
                }).catch(function (err) {
                console.log(err)
            });
        }
    }
    else if(showMode==2)//未指定时间，指定诗人。
    {
        if(bubbleMode == 0){
            axios('http://localhost:8080/visualization/poem/emo/?name='+poetName)
                .then(function (response){
                    // if(response.data!="")
                    updateBubbles2(response);
                }).catch(function (err) {
                console.log(err)
            });
        }
        else if(bubbleMode == 1){
            axios('http://localhost:8080/visualization/poem/images/?name='+poetName)
                .then(function (response){
                    // if(response.data!="")
                    updateBubbles2(response);
                }).catch(function (err) {
                console.log(err)
            });
        }
    }
    else if(showMode==3)//指定时间，指定诗人。
    {
        if(bubbleMode == 0){
            axios('http://localhost:8080/visualization/poem/emo/?name='+poetName+'&beginTime='+beginTime+"&endTime="+endTime)
                .then(function (response){
                    // if(response.data!="")
                    updateBubbles2(response);
                }).catch(function (err) {
                console.log(err)
            });
        }
        else if(bubbleMode == 1){
            axios('http://localhost:8080/visualization/poem/images/?name='+poetName+'&beginTime='+beginTime+"&endTime="+endTime)
                .then(function (response){
                    // if(response.data!="")
                    updateBubbles2(response);
                }).catch(function (err) {
                console.log(err)
            });
        }
    }
}

//初始化意象气泡
function initImageChart(data = [], format = []) {
    let [maxValue, temp] = [0, []]
    data.forEach(item => {
        temp.push(item[format[1]])
    })
    maxValue = Math.max.apply(null, temp)
    // 气泡颜色数组
    let bakeColor = color
    let bubbleData = [] // 气泡数据
    let repulsion = 150 // 气泡间距

    // 根据气泡数量配置基础大小和斥力因子
    if (data.length >= 5 && data.length < 10) {
        repulsion = 120
    }
    if (data.length >= 10 && data.length < 20) {
        repulsion = 80
    } else if (data.length >= 20) {
        repulsion = 50
    }
    for (let item of data) {
        let curIndex = Math.round(Math.random() * bakeColor.length)
        let size = (item[format[1]] + Math.round(maxValue * 0.5)) / maxValue * 70 // 气泡大小

        bubbleData.push({
            "name": item[format[0]],
            "value": item[format[1]],
            "symbolSize": size,
            "draggable": true,
            "itemStyle": {
                "normal": {
                    "color": bakeColor[curIndex],
                }
            },
            "label": {
                "normal": {
                    "fontSize": size * 0.5
                }
            }
        })
    }
    bubbleOptions = {
        title: {
            text: '意象词云',
            top: '2%',
            left: '2%',
            textStyle: {
                fontSize: 30,
                color: '#000',
                fontFamily: 'cursive'
            }
        },
        animationEasingUpdate: 'bounceIn',
        tooltip: {//提示框组件
            trigger: 'item',
            textStyle: {
                fontFamily: 'cursive',
            },
            formatter: function(params) {
                if (params['data']['name'] !== '') {
                    return '<b>' + params['data']['name'] + '</b>：<b>' + params['data']['value'] + ' </b>';
                }
            },
        },
        series: [{
            type: 'graph',
            layout: 'force',
            //symbol:'path://M953.3 408.9c-7.8-39.4-22-76.3-37.7-113.3-15-35.2-31.1-68.8-55.7-98.1-12.6-15-24.7-30.7-47.5-28.7 6.7-5.1 15.5-9.7 4.3-18.9C726 61.3 614.7 30.5 491.5 37.1c-65.2 3.5-127.1 24-181.1 59.8-65.1 43.2-138.3 81.6-158.6 167.1-5.8 24.4-22.5 42.4-31.2 65.4-11.2 29.8-13.5 63.8-34.8 90.5-17.3 21.7-22.9 48.1-19.9 76.6 3.2 31.1 3.8 62.6 5.5 93.9 0.5 8.8 1.8 16.9 13.7 9.9 8.9 12.9-11.4 12.6-10.2 23.5 3.4 29.8 5.1 59.8 20.2 86.7 4.4-5.6 7.2-11.9 4.1-18.7-11.5-24.4 0.2-51.1-8.2-75.8 22.6-18 23.9-49.4 43.6-69.4 1.2-1.2 0.6-4.8 0.1-7.1-4-22-0.6-43.9-0.3-65.8 0.6-38.7-0.1-76.8 6.3-115.5 5.3-32.3 19.2-60.6 29.2-90.6 3.6-10.6 4.7-24 21.9-23.6 5 0.1 10-6.2 5.9-12.9-5.5-8.9-0.7-15.4 4.7-21.5 14.3-16.3 27.7-33.7 43.6-48.3 47.2-43.4 105.4-63.4 167.3-74.3 27-4.7 55.5-11.4 81.4-2.1 58.6 21.3 114.4 51.1 173.9 68.9 78.7 23.5 96.7 89.5 124.7 156-38.8-36.7-95.6-68-114.9-64.9 39.7 52.4 97.1 88.9 134.3 143.9-43.7-37.2-84.8-77.5-147.9-90.6 16.3 25.2 41.5 32.9 59.1 50.6 47.2 47.4 89.6 97.8 122.5 156.1 7.3 13 6.2 25 0.9 39.1-8.6 22.6-15.9 47.8-9.3 70.8 14.7 51.6-12.7 88.1-41.5 121.9-38 44.7-82.8 78.4-142.6 97-55.2 17.2-108 25.6-164.4 19.8-63.2-6.5-119.9-31.1-175.4-59.9-6.5-4.3-14.4-7.5-19.4-13.1-38.9-43.9-86.1-80.6-116.5-132.1-1-4.1-5.1-9.2-7.2-7.2-5.9 5.6-2.7 12.5 1.3 18.4-2.5 7.6-3.5 14.5-1 23.1 5.9 20.2 11.9 42.4 10.8 61.7-0.8 14.2-0.7 30.2 6.4 36.3 9.3 8 19.2 13.5 22.1 26.4 0.1 0.3 1.7 0.6 2.3 0.3 16.7-8.7 21.3 8.2 27 15.5 13.4 17.2 26 31.4 49.7 35.1 12.9 2 15.3 2.2 14.8-11-0.5-12.6-5.4-26.2 4.1-37.9 6.7 14.4 20.4 26.7 8.6 45.7-5.4 8.7 5.8 13.6 11.7 14 16 1.1 20.4 11.7 26.2 24 7.1 15.3 16.9 27.5 38.2 19.7 20.8-7.7 42.4-18.4 65-11.6 18 5.4 36.4-22.5 53.5 2.2 1.5 2.1 8.4-4.5 11.8-9.6 5.9-8.7 18.6-13.6 24.6-6.6 10.1 11.8 20.5 7.5 30.4 5.1 15.1-3.7 28.6 10.7 43.4 2.4 5.7 20.2 18.7 9.7 29.8 7 46.9-11.6 84.8-37.8 116.1-73.7 28.6-32.8 56-66.5 84.2-99.6 5.7-6.7 13.7-18.5 18.6-17.5 16.1 3.1 14.2-7.4 16.5-15.9 1.6-5.9 1.7-14.2 10.9-12.8 8.6 1.3 8.3 9.4 8 15.4-1.2 21.7 8.6 42.1 4.1 65.5 14.5-4.3 16.6-14.7 19.1-24.6 6.5-26 8.8-52.5 8.5-79.2-0.4-49.3 3.6-99 16.4-145.8 9.8-36.7 6-69.6-0.8-104.3zM170.3 121.6c19.1 0 38.6-17.9 38.9-35.6 0.3-18-15.3-33-34.3-33-20 0-35.8 14.9-36.1 34.1-0.4 21 12 34.5 31.5 34.5z',
            // symbol:'path://M437.3 183.7zM958.8 527.1c-5.3-8.4-3.2-16.1-0.2-24.2 1-2.8 0.8-5.3-1.9-7.2 3.2-10.2 3.8-20.4 0.5-30.9-2.2-6.9-4.5-14-3.3-21.4 6.2-8.2 0.6-12.5-5.4-16.6 0.5-23.2-1.5-45.8-13.8-66.3-1.9-10.7-2.1-22.6-8.6-31.3-9.3-12.2-14-26.1-20.2-39.6-3.8-8.4 0-19.9-9.9-25.7l-5.5-5.5c-1.8 0-3.6-0.1-5.4-0.1 0 0.1 0 0.1-0.1 0.2v-0.1l0.1-0.1c-1.4-2.1-2.8-4.2-4.1-6.3 0.2-0.6 0.4-1.3 0.5-2-0.8-4.8-1.9-9.5-4.8-13.6-13.9-15.9-26.3-33-35.8-52-7.9-15.7-19.2-28.7-33.2-39.2-3.5-6.8-10.6-6.4-16.6-8.2-0.9-0.9-1.9-1.8-2.8-2.7-9.4-5.4-18.2-12.8-30.3-8.6-10.8 2.8-22.7-6.2-33 3-9.6 6.7-19.4 12.6-30.3 17.3-10.2 4.4-22.4 4.6-30.9 12.9-11.6 6.3-22.4 13.9-32.6 22.3-1.5 8.1-4.2 14.9-13.8 16.6-2.2 0.4-3.9 3.5-5.8 5.4-13 15-23.1 31.1-19.7 52.3-8.8 8.8-0.3 15.1 3.2 22.2 2.7 8.3 12.1 10.1 16.4 16.8 1 0.9 1.9 1.8 2.9 2.6 2.6 8.4 10.2 7.2 16.4 8.5 0.9 0.9 1.9 1.8 2.8 2.7-0.9 4-6.4 5.3-6 10.4 13.6 4.2 27.8 7.7 32.9 23.8 0.9 2.8 3.3 4.3 6.3 4.5 2.5 10.3 5.9 20 16.6 24.9 4.5 2.3 1.1 8.7 5.5 11 4.3-5.7 3-22.6-2.2-29.7 0.2-0.2 0.4-0.3 0.5-0.5 1.6-8.3-3.7-10.2-10.1-11.5-1.4-0.3-4.9 2.9-4.5-1.5 0.7-7.9-6-10.3-10.1-14.6 11.5 3.6 22.8 7.6 29.2 19 0.8 2.6 1.1 5.6 2.6 7.6 5.9 7.6 15.9 14.3 2.7 24.2-0.4 0.3 3.6 1 5.7 1.4-0.6 2.1-2.2 4.9-1.4 6.1 2.1 3.2 4.6-0.1 7-0.6 2.1 0.4 4.8 0 2.8 3.8-3.9 7.4-8.5 14.8-5.5 23.8h-0.1c0.4 2.7 1.1 5.3 1.3 8 0.9 14.2 12.8 24 14.9 37.5 3.4 21.8 7.2 43.9 2.7 65.9-1.3 6.2 6.3 13.4-2.2 18.5h-2.8c0.6 13.4 0.5 26.6-11.9 35.8-2.1 1.6-1.4 4 0.8 5.6l0.1-0.1h-0.2c-6.3 9.8-9 21.6-17.6 30.1-4.2 4.1-7.1 8.7-1.8 14.1-6.7 12.2-10.2 26.2-19.2 37.2-0.2 0.3-0.1 0.9-0.2 1.3-10.1 7.6-18.4 17.3-29.8 23.7-12.9 7.2-24.8 16.5-33.7 28.8-7.5 1.7-15.7 1.9-22.3 5.3-22.1 11.2-44.8 18.7-69.9 20-12.5 0.6-25.3-1.7-37.6 2.5-0.9 0-1.8-0.1-2.7-0.1-2-0.9-4-2.6-6-2.6-36.5 0.9-68.5-12.1-99-30.6-5.6-3.6-9.2-10.2-16.6-11.1-5.1-4.6-10.2-9.2-15.3-13.9-12.6-11.9-23.3-26-39.8-33.3-5.9-9.6-10.9-19.8-19.4-27.6-13.5-9.3-17.3-25.2-25.2-38.2-1-1.9-1.9-3.8-2.9-5.7-0.7-1.9-1.5-3.7-2.2-5.6 2.7-14.1-6.1-25.7-8.3-38.7-2.8-12-5.6-24.1-8.4-36.1-0.3-5.2 0.6-11-5.7-13.8-2.7-1-5.4-2-8-3.1-0.1-0.7-0.3-1.4-0.6-2.1-0.9-1.9-1.7-3.8-2.6-5.7l3.9-7.8c0.7-0.1 1.3-0.2 2-0.3 4.1-1.1 5.2 10.4 10.9 2.6 4.4-2.8 0.5-5.6-0.1-8.4 1.6-4.2-0.4-7.3-3.2-10.2-0.4-3.5-2.6-5.5-5.7-6.6 0.4-0.8 0.7-1.7 1.1-2.5 3.8-0.2 6.4-2.1 7.8-5.6 1-1.7 2-3.5 3-5.2 9.9-0.2 3.1-5.3 2.5-8.6 0.8-0.1 1.6-0.2 2.4-0.4 2.7-0.2 7.1 2.1 7-2.8-0.1-3-4.2-2-6.7-2.3-0.1-2.7-0.3-5.4-0.4-8.1 1-1 2.1-2 3.1-3 5.2-4.8 2-11 2.9-16.6-0.2-5.3-3.1-8-8.3-8.3l-2.7-3c1.8-2.8 1.5-5.5-0.1-8.2 0.9 0.1 1.8 0.1 2.7 0.1 5.2 2.4 9.8 0.9 13.9-2.6 1-0.2 2.1-0.4 3.1-0.6 7.4 0.1 6.1-8.2 10.6-10.9 2.5 0.2 5 5.5 7.3 0.9 1.3-2.5-2.2-2.8-4.3-3.2 0.7-4.2 1.5-8.4 5.4-11.2 0.9 2 2.2 4.8 4.5 3.4 4.5-2.8 1-7.3 1.4-11.1 12.8-2.2 18-10.6 18.8-22.8 4.9-7.2 9.7-14.4 14.6-21.6 6.1 6 11 6.1 16.7-1.4 4.5-5.9 10.8-10.5 16.6-15.5 2.8-2.4 2.8-4.2-0.2-6.2v-1.3c4.7 0.3 4.7-4.4 7.1-6.6 9 5.7 12.9 3.4 11.8-7.3l1.3-0.5 1.4 0.2c2.3 7.6 7.1 5.5 11.8 2.8 6.3-3.7 12.4-7.7 18.6-11.5 2.7-0.9 5.5-1.9 8.2-2.8 10.8-6.5-3.5-4.8-2.6-8 1.8-1.1 3.5-2.3 5.3-3.4 6.5-1.7 13-3.4 19.5-5.2 8 7.6 14.9 9.6 17.4-4.1 0.9-5.1 6.1-3.3 7.6-6.5-0.1-0.3-0.3-0.5-0.4-0.8h0.1l0.3 0.8c5.5-2 11-3.9 16.6-5.9h16.3c0-1.2 0.1-2.4 0.1-3.6-13.9 0.4-26.9-9.2-41.5-2.3l0.3 0.4-0.1 0.1c-0.1-0.2-0.1-0.4-0.2-0.5-3.9-1.2-10.8 3.6-11.4-2.6-0.5-5.3-2.1-13.3 6.1-16.5 0-0.9 0.1-1.8 0.1-2.7 1.8-1 3.7-1.9 5.5-2.9 3.7-0.9 7.3 5 11.1 0.2 0-0.9-0.2-1.8-0.6-2.6 2.2 0.1 4.2 0.7 6 2.4 10.4-1.8 3.3-9.9 5.4-14.4 3.8-8 4.1-11.3-6.1-9.4-1.7 0.3-5-1.3-5.7-2.8-1.6-3.5 2.4-4.2 4.3-5.8 4.7-3.9 10.6-5.4 16.5-6.1 3.9-0.5 7.4-0.7 7.8-5.7-0.1-3.6-1.9-5.4-5.5-5.5-6.4-0.9-12.9-1.8-19.3-2.8-4.4-6.4 5.8-12.9 0-19.3h-8.3c-2.3-7.2-10.1-4-15.4-7.5 5-4.4 10.4-5.2 15.6-6.2 3.4-0.7 9.7 4.1 9.6-2.9-0.2-7.5-6.8-2.3-10.4-3.3-12.4-3.4-26.8 6.1-38-6.9-2.8-3.3-9.3-1.3-11.2 4.8-6 3.6 4.4 10.3-2.6 13.7-11.8-7.6-20.4 3.4-30.5 5.4-3.6 0-7.3 0.1-10.9 0.1-11.3 0.4-22.1 2.4-30.5 11-7.6 0.1-13.8 3.4-19.4 8.3-1.8 0.1-3.6 0.1-5.5 0.2-4.1-2.2 3.2-10.2-4.5-9.9-5 0.2-7.2 4.6-6.5 9.8-3.3 1.8-2.9 5.1-3.2 8.1-2.7 1.9-5.4 3.8-8 5.6l0.3 8.4c0.5 7.7 4.5 4.2 8 2.5 0.1 1.2 0.2 2.3 0.3 3.4-2.1 7.1-10.4 7.8-14 13.4L250.3 178c-4.2-0.3-8.7-0.1-9-6.2-0.9-4.5-1.7-8.9-2.6-13.4 7.3-2.1 13.3-6.5 19.2-11.1-12.9-7.5-15.7 2.5-19.2 11.1-5.7 2.4 0.5 8-2.8 11-2.8 0.9-5.6 1.9-8.3 2.8-7.7 1.4-15.8 2.5-13.7 13.7h-2.8c-2.5 0.4-7.1-0.7-6.5 2.7 0.8 4.9 6 2 9.2 2.9v2.7c-2.2 0.2-4.3 0.6-5.5 2.8-5 1.1-11.1-2.3-15.7 3 4.2 4.3 7.1 0.8 10.2-0.2 0.2 3.9-0.5 7.5-2.9 10.7 0.2 0.3 0.4 0.6 0.7 0.9h-0.3l-0.4-0.9c-3 0.3-6.3-0.1-8.3 3-4.2 2.5-0.8 5.3-0.4 8l0.7 0.6v0.1l-0.7-0.7c-4.8 0.9-8.3-0.9-12.3-3.7-5.3-3.6-7.9 1.5-9.9 5.7-1.2 2.4-0.6 4.2 2.1 5.2 9.6 3.4 9.6 3.4 3.9 12.2-2.1-0.4-4.9-1.9-6.1-1.1-3 2.2 0.3 4.6 0.8 7-2 3.5-3.9 7-5.9 10.6-4.4 5.1-10.3 9.3-10.7 17-8.1 5.5-11.4-1-15.6-8-1.6 9.5-2.6 16.8 4.9 22.2-0.3 3.8-0.5 7.5-5.4 8.2-2.6-4.8-7.8-1.4-11.1-3.6-2-1.3 0.8-9.5-5.6-4.7-3.9 2.8-1.5 6.8 0.2 11 1.2 3 8.8 6.2 2.1 11-5.2 3.3-15.1 4.8-5.5 14 1.9-1 3.8-2 5.6-3 0.9 0.9 1.7 1.8 2.6 2.7-1.5 3.8-3.1 7.7-4.6 11.5-0.4 0.8-0.7 1.5-1 2.3-2.8 1.9-5.5 1.5-8.2-0.1-2.1 4.9 1.1 9.7 0.5 14.6-0.2 1.5-0.4 3.1-0.6 4.6-4.2 6-5.3 12.7-5 19.9-0.9 0.9-1.9 1.8-2.8 2.7-3.5 2.6-7 5.1-10.5 7.7-0.3 0.2-0.5 0.3-0.8 0.6-1.9 0.6-5.4 0.5-3.8 3.5 2 3.8 6.2 1.5 9.5 1.8 3.2 3.1 2.6 5.5-1.2 7.4-5 2.6-2.5 4.7 0.5 6.8-2.1 3.3-6.8 5.5-4.5 10.7 1.6 3.4 5 2.4 7.6 3.3-4.4 2.8-11.1 3.3-10.9 10.7-0.2 5.6-4.3 5.5-8.2 5.4-9.3-3.8-7.8 3.3-8.3 8.3-14.3 1.3 0.2 12.3-5.5 16.6-4 4.6-4.2 9.2 0 13.8 3.6-0.8 7.2-1.6 10.9-2.4l0.4-0.9c0.1 0 0.2 0.1 0.3 0.1-0.2 0.3-0.4 0.5-0.7 0.8-1.2 4.4 5.3 10.3-2.6 13.4h-5.5c-3.1 7.4-3.5 14.7 0 22.1 3.8 11.2 10.3 6.2 16.6 2.8 2.8 0.9 5.5 1.8 8.3 2.6l-2.7 8.4c-3.5 1.8-7.1 3-11.1 2.7-11.2-1-2.9 7.7-5.5 11-2.5 9.3 4.6 11.2 10.7 14 2.8 12.5 15.6 15.9 22.6 24.7l-5.7 5.4c-3.6 0.1-7.1 0.3-10.7 0.4-3.2-0.5-9-10.6-8.5 2.3 6.2 6.1 2.4 10.2-2.8 14-3.5 8.6 5.5 10.9 8.2 16.3v5.7c4.8 1.6 3.3 11.4 11 9.3v1.7c-4.4 0.5-10.2-1.8-11.1 5.6 0.9 0.9 1.7 1.9 2.6 2.8 1.8 1.9 3.3 4.4 6.6 3.5h0.1l1 1c-6.8 1.7-4.1 7.6-4.9 11.8-5.3 5.1 2.4 5.4 3 8.3 11.9 5.4 10.7 21.5 22.1 27.3-1 0.9-1.9 1.9-2.9 2.8-2.1-0.4-4.3-0.8-6.4-1.2-0.1 1.2-0.6 2.7-0.2 3.7 3.3 7 14.2 8.7 20.6 3.4 0.9 0 1.8 0 2.7-0.1 3.9 0.1 7.9 0.6 11.1-2.5 1.6 0 3.2 0 4.8-0.1 0 2.4 0.1 4.7 0.1 7.1-5.1-0.4-5.1 4.5-7.5 7-5.4 0.2-12.9-5.2-15.3 3.3-2.3 8.3 6.9 8.2 11.4 10.7 3.3 1.8 7.9 1.4 11.9 1.9l1.2 0.3h1.2c4.1 5.3 9.8 7.7 16.3 8.5 0 3.9 4.6 6.4 3 10.7-4.8 4-13-3.6-17.9 5.4H170c6.5 3.6 4.5 9.8 3.7 14.6 6.9 3.4 20.8-7.8 17.8 10.3-3.4 3-10.5 1.1-11 8.2-4.5 1.1-7.4 5.5-2.9 7.1 7.7 2.6 8.8 5.8 7 12.8-0.7 2.8 2.7 5.1 5.5 4.9 9.9-0.7 19.7 5.1 29.6 0 0.9 0.9 1.7 1.9 2.6 2.8 1.3 6.2-7.9 8.3-6.1 16.3 5.6-3.8 9.8-7.1 11.6-12.8l1.2-0.3 1.2 0.1c6.4 3.8-6.3 14.5 5.8 16.3 4.6 4.7 9.2-1.8 13.8 0 3.7 4.8 7.7 9.2 13.7 11.1 1.8 4.6 3.6 9.3 5.3 13.9 0.7 3.3-3.6 8.5 1.4 9.6 8.7 1.9 12.3 11.1 20.7 12.8 0.9 0.8 1.8 1.7 2.7 2.5 0.9 4.8 3.1 8.1 8.5 8.2 3 3.6 7.2 2.2 10.9 2.7 9.1 16 27.8 15 41.6 22.2 18.6 9.7 40.1 14.2 60.7 19.2 19.9 4.8 39.9 10.3 60.8 7.7 18.4 4.6 36.8 3.4 55.3 0.6 14-0.8 27.9-0.6 41.9-2.1 15-1.6 28.6-8.9 43.7-9.1 1.3-2.2 7.2-0.5 5.4-5.4h0.3c14.1 2.2 25.6-6.4 38.6-8.9v0.5c0.9 0 1.8-0.1 2.6-0.2 23.7-8.7 47.1-17.9 68-32.3 0.3-0.2 0.7-0.4 1-0.7 4.2-2 9.1-3.2 11.2-8.1 5.2-6.3 14.5-7 19.3-13.8 9.4-2.1 12.6-11.4 19.4-16.5 10.3-1.6 16.4-8.9 22.2-16.6 7.8-1.1 12-6.9 14.3-13.3 2-5.7 5.8-8.8 10.4-11.6 7-0.6 10.4-5.9 13.9-11l19.2-24.9c10.3-13.7 22.1-26.3 30.4-41.4 14.5-9 12.4-25.2 16.7-38.6 13.2-16.2 20.6-35.1 24.8-55.3 4.7-7.3 4.3-16.2 7.5-24.2 9.1-23 15.6-46.9 11.9-72.3 6.4-0.6 6.9-6.3 4.7-9.8zM167.3 266.3c-0.2 0.1-0.4 0.3-0.7 0.4 0.3-0.4 0.5-0.7 0.6-1.1 0 0.2 0.1 0.5 0.1 0.7z m529.6-107.7c0 0.1 0.1 0.1 0.1 0.2h-0.1-0.1c0.1-0.1 0.1-0.2 0.1-0.2zM583.7 921.3c0.1 0 0 0 0 0zM608 231.4c0.1 0.1 0.2 0.1 0.2 0.2l-0.1 0.1c0-0.1 0-0.2-0.1-0.3z m290.7 430.3c0 0.1 0 0.2-0.1 0.3-0.1 0-0.1-0.1-0.2-0.1 0.2-0.1 0.2-0.2 0.3-0.2zM233.2 197.5s0.1 0 0 0c0.1 0 0 0 0 0z m160.2-76.8c0 0.1 0.1 0.3 0.1 0.3-0.3-0.1-0.6-0.1-0.9-0.2 0.1-0.3 0.2-0.5 0.4-0.8 0 0.2 0.2 0.5 0.4 0.7z m251.1 74h0.7c-0.1 0.2-0.3 0.5-0.4 0.7-0.2-0.2-0.3-0.4-0.3-0.7z m-80.1 713.4v1.3h-0.1c-0.1-0.4 0-0.9 0.1-1.3zM279.8 783.2s0.1 0 0 0c0 0.2-0.1 0.3-0.1 0.4 0-0.1-0.1-0.3-0.1-0.4h0.2zM531.3 902v-0.3c0.1 0.1 0.2 0.1 0.2 0.2-0.1 0-0.1 0-0.2 0.1zM279.7 799.9h0.7l-0.3 0.9c-0.2-0.3-0.3-0.6-0.4-0.9z m83.1-610.6c0 0.2 0.1 0.3 0.2 0.5h-0.2c-0.1-0.2-0.1-0.4 0-0.5-0.1 0-0.1 0 0 0z m-55.4 8h0.2-0.2l0.3 0.4c-0.2-0.1-0.4-0.1-0.6-0.2 0.1 0 0.2-0.1 0.3-0.2z m-44.3 486.6c0.1 0 0.1 0 0 0z m44.5-486.1z m369.9 46.5c0.1 0.1 0.1 0.1 0.1 0.2 0 0 0.1 0 0.1 0.1h-0.1v0.1c-0.2-0.2-0.3-0.5-0.5-0.7 0.1 0 0.2 0.2 0.4 0.3zM505 884.4c0-0.5 0.1-1.1 0.3-1.8 0.4 0 0.8 0 1.1 0.1-0.3 0.9-0.8 1.4-1.4 1.7zM125 490.1c0 0.1 0.1 0.2 0.1 0.3-0.1-0.1-0.3-0.2-0.4-0.3h0.3z m127.2-248.3s0.1 0 0 0c0.1 0 0.1 0 0 0z m-77.2 232c0.3 0.7 0.2 1.3 0 1.8-0.1-0.5-0.1-1.1-0.2-1.7 0.1-0.1 0.2-0.1 0.2-0.1z m-22.3 41.8h0.3l-0.1 0.1c-0.1-0.1-0.2-0.1-0.2-0.1zM172.4 333c0-0.1 0-0.1 0 0 0-0.1 0-0.1 0 0 0.1-0.1 0-0.1 0 0z m5.1 91c0.1 0.2 0 0.4 0 0.5v-0.5z m524.6-166.6c0.2 0.3 0.5 0.5 0.7 0.8l-0.8 0.8c0-0.5 0-1 0.1-1.6zM293.6 762.7c0.4-0.1 0.7-0.1 1.1-0.2-0.4 0.4-0.7 0.8-1.1 1.4v-1.2z m519.5-319.3h0.3c-0.1 0.1-0.1 0.2-0.2 0.3-0.1-0.1-0.1-0.2-0.1-0.3z m49.7 66.3v-0.1h0.1c-0.1 0-0.1 0.1-0.1 0.1z m-85.6 207.2h-0.7c0.1-0.2 0.3-0.3 0.4-0.5 0.1 0.1 0.2 0.3 0.3 0.5z m2.7 22.1c0-0.1 0-0.1-0.1-0.2 0.1 0.1 0.2 0.2 0.4 0.2h-0.3z m-52.5-19.3c-0.2-0.1-0.3-0.2-0.5-0.3 0.2-0.1 0.3-0.1 0.5-0.2v0.5z m44.2-389.6c-0.1 0.1-0.1 0.2-0.2 0.3-0.1-0.1-0.2-0.3-0.3-0.4 0.2 0.1 0.3 0.1 0.5 0.1z m-44.5 403.2c0 0.1 0.1 0.1 0.1 0.2h-0.1v-0.2z m-60.6 72c0.1 0 0.1 0 0 0 0.1 0 0.1 0 0 0 0.1 0 0.1 0 0 0z m-226.2 46.9z m107.5-16.5c0.1-0.3 0.1-0.5 0.2-0.7l0.4 0.4-0.6 0.3z m-41.4-11.1c-0.1 0.1-0.1 0.1 0 0-0.1 0 0 0 0 0z m113.4-11.4c0.2 0.1 0.4 0.2 0.5 0.3-0.2 0.1-0.5 0.1-0.7 0.2 0.1-0.2 0.2-0.4 0.2-0.5z m162.8-458.3s0 0.1 0 0c-0.5 0-0.9 0.1-1.3 0.1 0.4-0.1 0.9-0.1 1.3-0.1z m-93.9 381.5c-0.1 0-0.1-0.1-0.2-0.1l0.1-0.1 0.1-0.1c0-0.1 0.1-0.1 0.1-0.2 0.1 0.1 0.1 0.1 0.1 0.2h-0.2l-0.1 0.1c0 0.1 0 0.1 0.1 0.2zM451 813.7c-0.2-0.1-0.4-0.1-0.5-0.2 0.2-0.4 0.4-0.7 0.7-1-0.1 0.4-0.1 0.7-0.2 1.2z m329.1-598.1c-0.5-0.1-1.1-0.1-1.6-0.3h1.6v0.3z m-47.2 441c0-0.1-0.1-0.3-0.1-0.4h0.2c-0.1 0.1-0.1 0.2-0.1 0.4zM354.4 844c0.1 0 0.1 0.1 0.2 0.1-0.1 0.1-0.1 0.2-0.2 0.2v-0.3z m80.1 2.9c-0.1 0.2-0.1 0.3-0.2 0.5 0-0.2 0.1-0.4 0.1-0.5 0-0.1 0-0.1 0.1 0z m331.6-491.4c0.9 0.3 1.7 0.6 2.7 0.8-0.9 0.2-1.6 0.5-2.4 0.7 0-0.5-0.1-1-0.3-1.5zM456.7 802.6c-0.1 0-0.1 0 0 0-0.1 0 0 0 0 0z m-13.6-11h-0.1v-0.1c0 0.1 0 0.1 0.1 0.1z m201.4 69v0.2l-0.2-0.2h0.2z m-243.8-55.3h0.6c-0.1 0.1-0.2 0.2-0.4 0.3-0.1-0.1-0.1-0.2-0.2-0.3zM202.6 391c0-0.6 0-1-0.1-1.5 0.2 0.3 0.4 0.7 0.5 1.1l-0.4 0.4z m1.9-44.7v-0.1 0.1z m-4.6-27.1v-0.1 0.1z m27.7-27.7c-0.2 0.4-0.3 0.7-0.5 1.1-0.3-0.3-0.5-0.7-0.7-1.1h1.2z m-8.5 394.9z m79.6 118.9h0.5l-0.2 0.2c-0.2 0-0.3-0.1-0.3-0.2z m522.7-115.7c0-0.1 0-0.2-0.1-0.3 0.1 0 0.3 0 0.4 0.1-0.1 0.1-0.2 0.2-0.3 0.2zM855 284c0.1-0.2 0.1-0.1 0 0z m-19.8-12s0 0.1-0.1 0.1l0.1-0.1c-0.1 0.1 0 0 0 0v-0.2c0.1 0 0.1 0 0.2 0.1-0.1 0.1-0.1 0.1-0.2 0.1zM724.6 642.3c0.1 0.1 0.1 0.1 0 0.1v-0.1z m-373 121.8c0-0.1 0-0.1 0 0 0-0.1 0-0.1 0 0 0-0.1 0-0.1 0 0zM211.2 261.8s0.1 0 0 0c0.1 0 0.1 0 0 0z m-75.1 147.4v0.6c-0.3-0.2-0.5-0.2-0.8-0.4 0.3-0.1 0.5-0.2 0.8-0.2z m-16.6 100.6z m96.7 185.1c0 0.1 0 0.1 0 0z m295.5 193.3h0.2c-0.1 0-0.1 0.1-0.2 0.1v-0.1z m14-13.8s-0.1 0 0 0c-0.1 0 0 0 0 0z m22.2-13.8h0.2v0.2c-0.2-0.1-0.2-0.1-0.2-0.2z m93.3 10.3c0.1 0.3 0.3 0.5 0.5 0.8h-0.7c0-0.3 0.1-0.6 0.2-0.8z m83.3-228.8c0 0.1 0 0.1 0.1 0.2h-0.2c0-0.1 0.1-0.1 0.1-0.2zM398.9 791.6c-0.1 0-0.1 0.1-0.2 0.1-0.1-0.1-0.2-0.1-0.2-0.1 0.1-0.1 0.2-0.1 0.4 0zM249.3 307.9s0-0.1 0 0c0 0 0.1 0 0.1 0.1h0c0-0.1-0.1-0.1-0.1-0.1z m151.6-151.6l0.2-0.2c0 0.1 0.1 0.1 0.1 0.2h-0.3z m-140.8 68.5c0.1 0.1 0.1 0.2 0.1 0.2h-0.1c0.1 0 0.1-0.1 0-0.2zM125.5 426.5s-0.3 0.2-0.5 0.4l0.5-0.5v0.1z m-6 83.3h-0.4v-0.5c0.1 0.2 0.3 0.3 0.4 0.5z m105.3 210.7c-0.7 0.7-1.8 0.9-3.1 0.8 1.2-0.3 2.3-0.6 3.1-0.8z m57.7 62.8l0.2-0.2c0.1 0 0.1 0.1 0.2 0.1-0.1 0-0.2 0.1-0.4 0.1 0 0 0 0.1 0 0h-0.1 0.1z m24.9 38.6c0.1 0 0.2 0.1 0.2 0.1l-0.1 0.1s0-0.1-0.1-0.2z m160.3 85.7h0.1c0 0.1 0 0.1-0.1 0.2 0.1-0.1 0-0.2 0-0.2z m395.1-622.1v0.4c-0.1-0.2-0.2-0.4-0.4-0.5 0.1 0 0.2 0.1 0.4 0.1z m-646.1 69.2c0 0.1 0.1 0.1 0 0 0 0.1 0 0.1 0 0z m13.2-44.9c0 2.7 0.1 5.4 0.1 8.1-1.3-2.2-2.6-4.4-4.1-6.4 1.6 0.3 2.8-0.6 4-1.7z m64.2-51.1c0-0.1-0.1-0.1 0 0 0-0.1 0-0.1 0 0 0-0.1 0 0 0 0z m-97.2 13l-0.1-0.1h0.1v0.1z m160.2 602.8c-0.5 0-0.9 0-1.3 0.1l0.6-0.6c0.3 0.1 0.5 0.3 0.7 0.5z m276.3-3.1v0.2c-0.1 0-0.1 0-0.2-0.1 0.1 0 0.2-0.1 0.2-0.1z m0.1 0.2c0.1 0 0.1 0 0 0z m60.6-687.9l-0.1-0.1h0.2l-0.1 0.1zM688.7 692h-0.2c0-0.1 0-0.2 0.1-0.3 0 0.1 0 0.2 0.1 0.3zM352 736.2c-0.1 0.1-0.2 0.1-0.3 0.1 0.1-0.1 0.2-0.1 0.3-0.1z m-0.3 0.1s-0.1 0 0 0c-0.1 0-0.1 0 0 0z m35.7-549.4l-0.1-0.1c-0.1-0.1-0.2-0.3-0.3-0.4h0.6l-0.3 0.4h0.1v0.1zM507 914.8v1c-0.2 0-0.4 0-0.6 0.1 0.1-0.5 0.3-0.8 0.6-1.1z m311.5-703.4c0-0.1 0-0.1 0 0 0-0.1 0-0.1 0 0 0.1-0.1 0.1-0.1 0 0 0.1-0.1 0 0 0 0z m-124.3-27.8v-0.1 0.1z m8 143.8v-0.3c0.1 0.1 0.2 0.2 0.3 0.2-0.1 0.1-0.2 0.1-0.3 0.1z m3 298.3s0.1 0 0 0l0.1 0.1s0-0.1-0.1-0.1v0z m-30.7 64.4c0-0.2 0-0.5-0.1-0.8h0.5c-0.1 0.3-0.2 0.5-0.4 0.8zM202.4 504.4v-0.1h0.1l-0.1 0.1z m99.7-337.1c0 0.1-0.1 0.2-0.1 0.3 0-0.1-0.1-0.2-0.1-0.3h0.2z m-68.8 30.2z m-61.6 504.7c0.1 0.3 0.2 0.6 0.4 0.9h-0.1l-0.3-0.9z m133 152.8z m-85.5-431s-0.1 0 0 0c-0.1-0.1-0.1-0.1 0 0 0-0.1 0-0.1 0 0z m5.2-218.3c0.1-0.1 0.1-0.1 0 0 0.1 0 0.1 0 0 0 0.1 0 0.1 0 0 0 0.1 0 0 0 0 0v0.5c-0.1-0.2-0.2-0.3-0.3-0.5h0.3z m-57.8 478.1c0 0.1 0.1 0.1 0.1 0.2l-0.2 0.2c0-0.2 0-0.3 0.1-0.4zM268.8 775z m35.9 80z m292.1 55c0.2 0.1 0.5 0.2 0.7 0.3-0.1 0.1-0.2 0.1-0.3 0.2-0.1-0.2-0.3-0.4-0.4-0.5z m53.1-604.8c0.1 0 0.1 0 0 0 0.1 0.1 0.1 0.1 0 0 0.1 0.1 0 0.1 0 0z m19.5-13.9v0.1c-0.1 0-0.1-0.1-0.2-0.1h0.2z m-373.3-5.5c-0.1 0.1-0.1 0.2-0.2 0.4-0.2 0.1-0.3 0.2-0.3 0.2-0.6-0.1-1.2 0-1.7 0.2 0-0.1-0.1-0.2-0.1-0.2-0.1-0.1-0.2-0.1-0.3-0.2l0.1-0.1 0.2 0.3h0.9l0.9 0.1c0.1-0.3 0.3-0.5 0.4-0.8 0.1-0.1 0.1 0 0.1 0.1z m-132.3 8.4s-0.1 0-0.1-0.1c0 0 0.1 0 0.1-0.1v0.2z m-41.9 341.2c1.5 0.8 3 1.6 4.3 2.7-1.3-0.2-2.5 0.1-3.5 1.3h-0.7c-0.1 0-0.2 0-0.3-0.1 0.4-0.3 0.8-0.6 1.2-0.8 0.1-1.1-0.3-2.2-1-3.1z m248.6 268.8c0.2 0.2 0.4 0.3 0.5 0.6-0.2 0-0.4-0.1-0.6-0.1 0-0.2 0-0.3 0.1-0.5zM843.4 220v-0.4c0.3 0.1 0.5 0.2 0.7 0.3-0.2 0-0.4 0.1-0.7 0.1z m-176.8 77.1c-0.2 0-0.3 0.1-0.5 0.1 0.1-0.4 0.1-0.7 0.2-1.1 0.1 0.3 0.2 0.6 0.3 1zM387.6 747v0.2c-0.1 0-0.1-0.1-0.2-0.1 0.1 0 0.2 0 0.2-0.1z m-92.4-78.9c-1.4-0.1-2.8 0-4.2 0 1.4-0.4 2.4-0.9 3.1-1.5 0.3 0.6 0.7 1.1 1.1 1.5z m-43.1-315.9l0.2-0.2c0 0.1 0.1 0.2 0.1 0.3-0.1-0.1-0.2-0.1-0.3-0.1z m27.8-44.2v0.1h-0.1l0.1-0.1z m24.8-171.2c0 0.1-0.1 0.1-0.1 0.1l-0.2-0.2c0.1 0 0.2 0.1 0.3 0.1zM125.1 377.3s-0.1 0 0 0c-0.1 0 0-0.1 0 0 0-0.1 0 0 0 0z m44 334.2c0.1 0 0.1-0.1 0.2-0.1l0.2 0.2c-0.1 0-0.3-0.1-0.4-0.1zM255 612c0.1-0.2 0.2-0.3 0.3-0.5 0 0.2-0.1 0.3-0.3 0.5 0.1 0 0 0 0 0z m-43.8-171l-0.1-0.1h0.2c-0.1 0-0.1 0-0.1 0.1z m411.2 474.8c0.1 0 0.2 0 0.3 0.1-0.1 0.1-0.2 0.3-0.4 0.4 0-0.2 0.1-0.3 0.1-0.5z m328.5-400.9c0 0.1 0 0.1 0 0 0 0.1 0 0.1 0 0 0 0.1 0 0 0 0z m-99.2-304.7s-0.2 0.1-0.5 0.5c-0.1 0.2-0.2 0.4-0.4 0.6-0.3-0.5-0.7-0.9-1.1-1.4 0.3 0.1 0.5 0.2 0.7 0.2 0.9 0.3 1.2 0.2 1.3 0.1z m-400.8 3.4z m-15.5-7.1c-0.3-0.1-0.5-0.2-0.8-0.3 0.3 0.2 0.6 0.2 0.8 0.3z m-150.1-58.9zM147 282.9v0.1h-0.1c0.1 0 0.1 0 0.1-0.1z m2.4 414.9c0.6 0.2 0.9 0.6 1.2 1.1-0.4-0.4-0.8-0.8-1.2-1.1z m-0.5 24.2h0.3v0.2c-0.1-0.1-0.2-0.1-0.3-0.2z m512.2 196.1z m63.6-32.6s0-0.1 0 0c0-0.1 0 0 0 0zM456.6 189.2z',
            force: {
                repulsion: repulsion,
                edgeLength: 10
            },
            // 是否开启鼠标缩放和平移漫游
            roam: false,
            label: {
                normal: {
                    show: true,
                    textStyle: {
                        color: '#000',
                        fontFamily: '楷体',
                    }
                }
            },
            data: bubbleData,
            emphasis: { // 单词高亮时显示的效果
                shadowBlur: 10,
                shadowColor: '#333',
                itemStyle: {
                    color: '#B36D61'
                }
            },
        }]
    }
}
//初始化情感气泡
function initEmotionChart(data = [], format = []) {
    let [maxValue, temp] = [0, []]
    data.forEach(item => {
        temp.push(item[format[1]])
    })
    maxValue = Math.max.apply(null, temp)
    // 气泡颜色数组
    let bubbleData = [] // 气泡数据
    let repulsion = 150 // 气泡间距

    // 根据气泡数量配置基础大小和斥力因子
    if (data.length >= 5 && data.length < 10) {
        repulsion = 120
    }
    if (data.length >= 10 && data.length < 20) {
        repulsion = 80
    } else if (data.length >= 20) {
        repulsion = 50
    }
    let curIndex=0;
    for (let item of data) {
        let size = (item[format[1]] + Math.round(maxValue * 0.5)) / maxValue * 70 // 气泡大小
        bubbleData.push({
            "name": item[format[0]],
            "value": item[format[1]],
            "symbolSize": size,
            "draggable": true,
            "itemStyle": {
                "normal": {
                    "color": color[curIndex],
                }
            },
            "label": {
                "normal": {
                    "fontSize": size * 0.5
                }
            }
        })
        curIndex++;
    }
    bubbleOptions = {
        title: {
            text: '情感词云',
            top: '2%',
            left: '2%',
            textStyle: {
                fontSize: 30,
                color: '#000',
                fontFamily: 'cursive'
            }
        },
        animationEasingUpdate: 'bounceIn',
        tooltip: {//提示框组件
            trigger: 'item',
            textStyle: {
                fontFamily: 'cursive',
            },
            formatter: function(params) {
                if (params['data']['name'] !== '') {
                    return '<b>' + params['data']['name'] + '</b>：<b>' + params['data']['value'] + ' </b>';
                }
            },
        },
        series: [{
            type: 'graph',
            layout: 'force',
            //symbol:'path://M928.4 321.8c-9.9-7.5-14.6-7.6-19.6 4.3-3.3 7.9-12.4 20.9-18.3 12.8-14.2-19.2-53.2-22.8-40.2-60.3 2-5.9 0.7-19.2-7.1-16.8-18.9 5.8-21.7-9.9-29.3-18.2-18.2-19.8-36.7-38.8-57.4-56.2-13.6-11.4-17.3-2.7-25.3 4.3 45.9 23.7 62.5 61.1 55.5 122-13.5-7.5-21.7-27.8-33-29-22-2.4-24.6-13.4-25.6-30-1.1-18.8-16.8-24.4-28.3-18.2-24.8 13.4-37.3-7.2-55.1-13.8-23.3-8.6-44.7-23.6-71.2-22.6-13.5 0.5-16.7-10.7-22.1-19.6-5.3-8.7 2.5-13.8 6.8-13.8 17.5 0.3 19.4-15.4 27.7-24.4 6.3-2.2 14.3 4.1 19.5-3.8-3.5-5.3-12.5 1-14.3-7.2 8.6-10.7 21.8-3.1 32.6-7.9-2.7-7.9-3.1-15.9-12.9-19.2-42-14-85.9-24.9-129-22.9-53.1 2.5-107.1 8.9-158.1 27.9-17.3 6.4-28.2 26.1-49.6 23.3 5.8 23.9-21.6 26.2-27.1 25.8-38.8-2.8-39 41.2-66.2 52.9-5.3 2.2-22.1 13.6-25.7 28.9-5.1 21.3-17.9 39.5-29.7 57.9-15.7 24.3-38.5 47.5-43.7 74-5 25.6-9.4 52.1-14.2 78.2-4.8 26.6-4.6 52.6 0.3 79.8 7.3 40.7 15.2 80.7 31.9 118.7 5.3 12-6.2 28.9 12.5 38.5 3.6 1.8-8.2 23.3 12.5 23.7-17.1 19.7 7.7 17.2 13.1 25 1.1 1.6-0.5 5.5 0.7 6.6 11.5 10.4 6.6 29.1 20.2 38.6 15.8 10.9 22.6 39.8 34.4 41.2 26.6 3 38.7 20.8 52.3 36.2 12.2 13.8 22.7 18.2 38.8 11.4 2.1 15.4 9.2 24.7 26.4 22.1 17.4 15.3 4.8-15.8 18.7-8.9 15.4 3.7 8.2 27.2 22.5 34.9 9.1-26.1-2-41-26-49.1-28.5-9.6-49.3-31.4-73.1-48.2-41.7-29.3-82.2-59.9-90-116.8-2.8-20.5-13.9-39.4-19.2-60.2-5.9-22.9-13.9-44.8-11.8-68.6 3.6-42.2-8.8-87.4 22.9-124.8 3.5-4.2 5.8-13.9 3.4-17.9-15.9-26 2.7-40.7 16.8-57.4 4-4.7 8.2-10.5 9.1-16.3 5.5-33.1 35.1-50.2 52.7-74.4 17.2-23.6 37.8-49.5 68.1-62.6 21.5-9.3 40.2-28.6 62.1-32.5 42.7-7.7 79.5-40.6 126.5-29.4 6.2 1.5 14.5-13.8 20 2.9 4.6 13.8-5 16.8-13.7 20-7.3 2.7-17.3 3.4-22.4 6.7-20.2 13.1-46-8.8-63.9 11.7-1.5-0.7-2.9-1.3-4.4-1.8-5.8-3.6-11.6-10.5-17.5 1.7-16.3 9.6-32 18.6-51.6 22.5-16.9 3.4-41.6 8.5-43.3 29.1-1.8 22.4-14.8 29.5-29.7 38.9-6.7 4.2-16.2 9.4-17.7 15.8-8.4 36.6-46.2 56.7-51.9 95.3-1.2 8.1 1.4 17.8-7 27.8-34.9 41.8-17.2 92-7.5 135.1 9.3 41.6 22.6 84.8 50.7 122.1 20.2 26.8 33.5 55.5 72.5 56.5 9.4 0.2 19.2 4.5 22.2 16.4 5.9 24.2 24.6 24 43.5 21.1 7.6-1.2 14.3-4.6 22.8-4.3 27.4 0.9 32.6-6.2 25.9-33.6 15.5 4.8 26.6 16.2 45.4 14.3 14.5-1.4 25.4 22.3 43.3 26.5-8.4 9.2-3.1 23.9-9.6 31.5-14.5 16.9 5.1 15.3 9.6 21.8 14.2-16.2 20.5 5.1 31 6.5 1-1.5 2.9-2.6 3.9-1.5 1.2 1.3 0.1 3-1.9 3.5-6.2 14.9-28.7-2-32.2 15.7-3.8 19.2 18.5 18.5 25.3 29.8 0.8 1.3 0.8 3.2 1.6 6.6-27 7.6-55.2 5.1-83 9.7 4.9 8.5 13.7 8.5 20.9 8.9 47.3 2.5 93.8-3.1 138.9-17.4 16.8-5.3 32.1-15.2 48.8-20.9C691 868.8 722 862.6 721 822c-0.1-3.7 3.6-9.6 6.9-10.8 28.3-10.5 34.1-37.9 46.2-60.4 10.9-6.6 24.1-15.2 15.1-28.5-7.5-11.1-12.5 6.8-20.2 7.8l0.3-0.8c-0.1 0.2-0.3 0.4-0.4 0.5-6-20.9 14.7-26.3 22.9-39 6.3 7.9 17.9 9.1 23.6 15.3 12.4 13.3-8.1 27.4-2.6 42.2 27.3-12.2 38.3-49.5 29.9-76-4.6-14.5-26.2-32.4-4.7-49.1 16.9-13.1 18-23.7 2.3-37.9-8.9-8.1-16.5-22.6-7.1-30.3 20.6-16.8 4.4-41.2 16.5-59 3.3-4.9-2.9-11.6-9.4-14-20.8-7.8-14.7-33.5-10.6-37.5 24.2-23.1 0.7-36.9-8.1-51.9-9.8-16.7-10.2-45.5 8.1-56.2 17-9.9 20.5 12.4 29.2 21.5 8.5 9 9.3 21.1 13.6 31.8-0.4 21.1 7.1 40.4 14.6 59.6-3 11-0.1 21.3 2.7 33.5 13.5-11.9 2-23 3.1-33.4-0.2-18.1-1.3-35.9-9.7-52.7-2.7-5.4-6-13.6 4.2-17.1 16.7 29.1 26.1 60 26 93.8 0 8.4-1 20.2 12.3 19.5 11.8-0.6 9.8-11 9-18.7-0.8-7.2-3.2-15.6 1.5-20.9 15.7-17.9 19.4-37.2 22.5-61.4 4.7-33.7-6.7-52-30.3-70.1zM768.6 730.7c-3.1 4.5-3.7 8.9-0.7 13.3-22.1 4-37.3 20.4-55.8 30.9 17.9-14.4 36.4-27.9 54.2-42.4 0.7-0.6 1.5-1.2 2.3-1.8z',
            force: {
                repulsion: repulsion,
                edgeLength: 10
            },
            // 是否开启鼠标缩放和平移漫游
            roam: false,
            label: {
                normal: {
                    show: true,
                    textStyle: {
                        color: '#fff',
                        fontFamily: '楷体',
                    }
                }
            },
            data: bubbleData,
            emphasis: { // 单词高亮时显示的效果
                shadowBlur: 10,
                shadowColor: '#333',
                itemStyle: {
                    color: '#B36D61'
                }
            },
        }]
    }
}
function updateBubbles2(response){
    let dataTest=[];
    for(key in response.data){
        let obj={};
        if(response.data[key]!=0) {
            obj["name"] = key;
            obj["value"] = response.data[key];

            dataTest.push(obj);
        }
    }
    dataTest.sort((a,b)=>{ return b.value-a.value});
    dataTest=dataTest.slice(1,16);//截取1-(n-1)名
    if(bubbleMode == 0)
    {
        initEmotionChart(dataTest, ['name', 'value']);

    }
    else if(bubbleMode==1){
        initImageChart(dataTest, ['name', 'value']);
    }
    bubbleChart.clear()
    bubbleChart.setOption(bubbleOptions)
    window.addEventListener("resize", function() {
        bubbleChart.resize();
    });
}