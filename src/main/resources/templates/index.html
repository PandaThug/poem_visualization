<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script th:src="@{/js/jquery.js}"></script>
    <script th:src="@{/js/main.js}" ></script>
    <script th:src="@{/js/axios.min.js}"></script>
    <script th:src="@{/js/echarts.min.js}"></script>
    <script th:src="@{/js/vue.js}"></script>

<!--    <link rel="stylesheet" href="../static/css/style.css">-->
<!--    <script src="../static/js/axios.min.js"></script>-->
<!--    <script src="../static/js/echarts.min.js"></script>-->
<!--    <script src="../static/js/main.js"></script>-->
</head>

<body>
    <!-- 标题区域 -->
    <div class="header" style="font-size: 25px;font-weight: bolder;align-content: center;color:white;">
        唐代著名诗人路径与部分诗作特征可视化
        <span th:style="'background:url('+@{/images/help.png}+');background-size:cover;'"></span>
    </div>
    <!-- 可视化大盒子 -->
    <div class="main" th:style="'background:url('+@{/images/background.jpg}+');'">
        <div class="column">
            <!-- 时间轴 -->
            <div class="timeAxisBox">
                <div class="timeAxis">
<!--                    //为实现滚轮 内嵌一个div-->
                    <div id="timeAxis">
                    </div>
                </div>
                <button id="globalBtn" >全局</button>
            </div>
            <div class="timeSettingBox" id="timeSetting">
                <div class="innerTimeSet" @mouseenter="mouseenter">
                    <div>自定义时间</div>
                    <div class="inputBox">  <input type="text" class="timeSetting" id="timeBegin" value="618" oninput="value=value.replace(/[^\d]/g,'')" maxlength="3">- <input type="text" class="timeSetting" id="timeEnd" value="907" oninput="value=value.replace(/[^\d]/g,'')" maxlength="3"></div>
                    <button class="timeSubmitButton" type="button" @click="timeSubmit">应用</button>
                    <div class="periodBox">
                        <div class="periodList">
                            <button @click="timeSwitch(0)">初唐</button>
                            <button  @click="timeSwitch(1)">盛唐</button>
                            <button  @click="timeSwitch(2)">中唐</button>
                            <button  @click="timeSwitch(3)">晚唐</button>
                        </div>
                    </div>
                </div>
                <div class="floatingBox">
                    已自动填入该诗人生卒时间
                    <div class="triangle"></div>
                </div>
            </div>
            <!-- 诗人列表 -->
            <div class="currentPoetBox" style="align-content: center">当前：<span style="font-weight: bold;" class="currentPoet">全选</span></div>
            <div class="poetsBox">

                <div class="poetsList" id="poetsList">
                    <!-- 左边，列表区域 -->
                    <div class="list">
                        <button class="allPoetsBtn" @click="clickAll()">全选</button>
                        <div class="poets">
                            <ul v-for="poet in poets">
                                <li><button @click="clickPoetName($event)" :value="poet">{{poet}}</button></li>
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="column">
            <div class="mapContainer">
                <div class="borderTop" th:style="'border-image-source:url('+@{/images/border1.png}+');border-image-slice: 67 67 0 67; border-image-width: 50px;border-image-outset: 5px;'"></div>
                <div class="borderRight" th:style="'border-image-source:url('+@{/images/border1.png}+');border-image-slice: 67 67 67 0; border-image-width: 50px;border-image-outset: 5px;'"></div>
                <div class="borderBottom" th:style="'border-image-source:url('+@{/images/border1.png}+');border-image-slice: 0 67 67 67; border-image-width: 50px;border-image-outset: 5px;'"></div>
                <div class="borderLeft" th:style="'border-image-source:url('+@{/images/border1.png}+');border-image-slice: 67 0 67 67; border-image-width: 50px;border-image-outset: 5px;'"></div>
                <!-- 地图显示区域 -->
                <div class="mapBox">
                </div>
                <!-- 历史事件栏 -->
                <div class="eventBox"></div>
            </div>
            <!--上层放置边框的盒子-->
<!--            <div class="mapBoxContainer" th:style="'border-image-source:url('+@{/images/border1.png}+');border-image-slice: 67 67 67 67; border-image-width: 50px;border-image-outset: 5px;'">-->
<!--                <div class="mapBox">-->
<!--                    &lt;!&ndash; 历史事件栏 &ndash;&gt;-->
<!--                    <div class="eventBox"></div>-->
<!--                </div>-->
<!--            </div>-->
            <!-- 意象与情感关键的关联分析 -->
            <div class="analysisBox">
                <div class="innerLeaf"></div>
            </div>
        </div>
        <div class="column">
            <!-- 气泡图 -->
            <div class="bubbleContainer">
<!--                <button class="changeBtn" id="changeBtn" @click="changeBubble">切换</button>-->
<!--                <button class="changeBtn1" id="changeBtn1" @click="changeBubble">&lt</button>-->
                <button class="changeBtn2" id="changeBtn2" @click="changeBubble" th:style="'background:url('+@{/images/switch.png}+');background-size:cover;'"></button>
                <div class="bubbleBox">
                </div>
            </div>
            <!-- 以十年为单位的作品折线图 -->
            <div class="lineChartBox">
                <div> <div class="lineChart"></div></div>

            </div>

        </div>
    </div>
<!---->
    <script th:src="@{/js/map.js}"></script>

    <script th:src="@{/js/image_emo.js}"></script>
    <script th:src="@{/js/timeline.js}"></script>
    <script th:src="@{/js/leaf.js}"></script>
    <script th:src="@{/js/updateLeaf.js}"></script>
    <script th:src="@{/js/lineChart.js}"></script>
    <script th:src="@{/js/updateLineChart.js}"></script>
    <script th:src="@{/js/initAll.js}"></script>
    <script th:src="@{/js/updateMap.js}"></script>
    <script th:src="@{/js/updatePoetName.js}"></script>
    <script>
        new Vue({
            el:"#poetsList",
            data(){
                return{
                    poets:["白居易","杜甫","杜牧","韩愈","李白","李贺","李商隐","刘禹锡","柳宗元","孟浩然","王勃","王昌龄","王维","元稹","温庭筠","韦应物","张九龄","陈子昂","岑参","骆宾王"]
                }
            },
            methods:{
                clickPoetName(e){
                    updatePoetName(e.target.value);
                    document.querySelector(".floatingBox").setAttribute("style","opacity:1");
                    setTimeout(function () {
                        document.querySelector(".floatingBox").setAttribute("style","opacity:0");
                    },1500)
                },
                clickAll(){
                    updatePoetName("");
                }
            }
        })
        // new Vue({
        //     el:"#changeBtn",
        //     methods:{
        //         changeBubble(){
        //             bubbleMode=(bubbleMode+1)%2
        //             updateBubbles()
        //         }
        //     }
        // })
        new Vue({
            el:"#changeBtn2",
            methods:{
                changeBubble(){
                    if(bubbleMode==0) {
                        bubbleMode=1
                    }
                    else
                        bubbleMode=0
                    updateBubbles()
                }
            }
        })
        new Vue({
            el:"#timeSetting",
            methods:{
                timeSubmit(){
                    timeSetting();
                },
                mouseenter(){
                    document.querySelector(".floatingBox").setAttribute("style", "opacity:0")
                },
                timeSwitch(num)
                {//四个唐代按钮
                    if(num==0)//初唐
                    {
                       document.getElementById("timeBegin").value=618;
                       document.getElementById("timeEnd").value=712;

                    }
                    else if(num==1)//盛唐
                    {
                        document.getElementById("timeBegin").value=713;
                        document.getElementById("timeEnd").value=755;

                    }
                    else if(num==2)//中唐
                    {
                        document.getElementById("timeBegin").value=756;
                        document.getElementById("timeEnd").value=824;

                    }
                    else if(num==3)//晚唐
                    {
                        document.getElementById("timeBegin").value=825;
                        document.getElementById("timeEnd").value=907;

                    }
                    timeSetting();
                }
            }
        })
        window.onload=function(){
            updateAll();
        }
    </script>
</body>

</html>